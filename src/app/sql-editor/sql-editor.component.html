<mat-card class="sql-editor-container">
  <mat-card-title>
    SQL Editor
  </mat-card-title>
  <mat-card-subtitle>
    This view allows you to execute SQL queries
  </mat-card-subtitle>
  <mat-card-content>
    <div style="columns: 2;">
      <mat-form-field>
        <mat-label>Select Schema</mat-label>
        <mat-select (selectionChange)="selectSchema($event);">
          <mat-option *ngFor="let schema of availableSchemas" [value]="schema">{{schema}}</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="padded table-container">
        <mat-list role="list" *ngIf="availableTables">
          <div mat-subheader>Available tables in selected schema</div>
          <mat-list-item role="listitem" *ngFor="let table of availableTables">{{table}}</mat-list-item>
        </mat-list>
        <div *ngIf="!availableTables">
          <h3>No tables available in selected schema</h3>
        </div>
      </div>

    </div>

  </mat-card-content>
</mat-card>

<mat-card class="sql-editor-container">
  <mat-card-title>
    Editor
  </mat-card-title>
  <mat-card-content>
  <mat-form-field>
    <mat-label>SQL Editor</mat-label>
    <textarea matInput class="sql-editor-input"
              [formControl]="editorText"
              (keyup.control.enter)="controlEnterPress($event);"
              matTextareaAutosize
              matAutosizeMinRows="1"
              matAutosizeMaxRows="15"></textarea>
  </mat-form-field>
  </mat-card-content>
</mat-card>

<mat-card class="sql-editor-container">
  <mat-card-title>
    Output
  </mat-card-title>
  <mat-card-content>
    <button mat-button mat-flat-button color="primary"
            (click)="resetData();" [disabled]="!(dataLoaded | async)">Reset</button>
    <mat-table [dataSource]="outputData" [hidden]="!(dataLoaded | async)">
      <ng-container *ngFor="let column of outputColumns" [matColumnDef]="column">
        <th mat-header-cell *matHeaderCellDef>{{column}}</th>
        <td mat-cell *matCellDef="let element">{{element[column]}}</td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="outputColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: outputColumns;"></tr>
    </mat-table>
    <div [hidden]="dataLoaded | async">
      <h3>No data to display</h3>
    </div>
  </mat-card-content>
</mat-card>

